$ref: "#/$defs/communication2" 
$defs: 
  communication2:
    tags:
      - communication-model-2 
    type: object
    properties:
      email:
        $ref: "#/$defs/channel"
      sms:
        $ref: "#/$defs/channel"
    additionalProperties:
      $ref: "#/$defs/lists"

  channel:
    allOf:
      - $ref: "#/$defs/status"
#      - properties:
#          lists:
#            $ref: "#/$defs/lists"
          
  lists: 
    allOf:
      - properties:
          channel: 
            type: array
            minItems: 1
            items:
              type: string
              enum:
                - email
                - sms
      - $ref: "#/$defs/status"   
      
  status:
    $ref: .\channels.schema.yaml/#/$defs/status
  
  