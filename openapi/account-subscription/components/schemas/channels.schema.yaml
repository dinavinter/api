properties:
  email:
    $ref: "#/$defs/channel"
    
  sms:
    $ref: "#/$defs/channel" 

$defs:
  channel:
    allOf:
      - $ref: "#/$defs/status"
      - properties:
          lists:
            $ref: "#/$defs/lists"

  lists:
    additionalProperties:
      allOf:
        - properties:
            topic:
              type: string
              example:
                newslatter
        - $ref: "#/$defs/status"
  status:
    properties:
      status:
        type: string
        enum:
          - opt-in
          - opt-out
          - noticed
      status-updated:
        type: integer
        readOnly: true 
      interaction-id:
        description: Corrolation id to the interaction which the status was updated with , i.e. callId
        type: string
        readOnly: true
        examples: 
          - <call id>
          - <interaction - id>
      data:
        additionalProperties: true
         
      
        
      